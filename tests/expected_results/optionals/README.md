# optionals test

Output files with `_readonly_interfaces` in its name reflect the bahaviour of the `--readonly-interfaces` CLI option.

Output files with `_with_null` in its name reflect the bahaviour of the `--with-null` CLI option,
that is not yet available. We would at least probably need 
[this PR](https://github.com/bcherny/json-schema-to-typescript/pull/411) of our json-schema-to-typescript dependency.

## Options summary

|                       | write to API (w/o null) | read from API (w/o null) | write to API (normal)        | read from API (normal)              |
|-----------------------|-------------------------|--------------------------|------------------------------|-------------------------------------|
| CLI options           | n/a                     | `--readonly-interfaces`  | `--with-null`                | `--readonly-interfaces --with-null` |
| required              | `field: string`         | `field: string`          | `field: string`              | `field: string`                     |
| required with default | `field?: string`        | `field: string`          | `field?: string`             | `field: string`                     |
| optional              | `field?: string`        | `field?: string`         | `field: string &#124; null`  | `field: string &#124; null`         |
| optional with default | `field?: string`        | `field?: string`         | `field?: string &#124; null` | `field: string &#124; null`         |

## Explanations

write to API
: Interfaces are meant for data beeing parsed by pydantic (non-optional fields with default values may be omitted or `null`).
You may use those interfaces for reading too, but the developer would need to know
which fields cannot be `undefined` at which point in the code and use `field!` to access them.
Otherwise, you'd probably need superflous checks against `undefined`.

read from API
: Interfaces are meant for data generated by pydantic (non-optional fields with default values are present).

w/o null
: Optional fields that are `None` in Python are not present in JSON, 
i.e. `undefined` in JavaScript (instead of beeing `null`).
To support this behaviour in your API, you need to serialize your models with `exclude_none=True`,
i.e. `model.json(exclude_none=True)` or `model.dict(exclude_none=True)`.
But you will not be able to set optional fields to `None`, if they have a default value other than `None`.
